#!/usr/bin/env ruby
require 'trollop'
require 'cfn_nag'
require 'logging'

opts = Trollop::options do
  opt :input_json, 'Cloudformation template to nag on', type: :string, required: true
  opt :debug, 'Enable debug output', type: :boolean, required: false, default: false
end

CfnNag::configure_logging(opts)
exit CfnNag.new.audit(opts[:input_json])